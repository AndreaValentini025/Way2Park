<!DOCTYPE html>
{% load leaflet_tags %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="theme-color" content="#000000">
    <title>Title</title>
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    {% leaflet_js %}
    {% leaflet_css %}

    <style>



        .fullscreen{
            height: 100vh;
            width: 100vw;
        }

        #main{
            position: absolute;
            height: 100vh;
            width: 100vw;
            z-index: 1;
        }

        .toolbar{
            margin-top: 3vh;
            margin-left: 10vw;
            margin-right: 10vw;
            width: 80vw;
            height: 10vh;
            border-radius: 15px;
            background: #1c3357;
            z-index: 1000;
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .toolbar-input{
            width: 80%;
            height: 60%;
            border: none;
            border-bottom: 2px solid #4ca4dc;
            font-size: min(20px,3vh);
            color: #4ca4dc;
            background: transparent;
        }

        input:focus,
        select:focus,
        textarea:focus,
        button:focus {
            outline: none;
        }

        .credit-card-button-container{
            position: absolute;
            width: 75px;
            height: 75px;
            z-index: 1000;
            bottom: 5vh;
            right: 5vh;
            background-color: #1c3357;
            border-radius: 10px;
        }

        .btn{
            width: 90%;
            height: 90%;
            background: url('../../../static/creditcard.svg') no-repeat 0 0;
            margin: 5%;
        }


    </style>


    <script>


        window.addEventListener("map:init", function (e) {
            const detail = e.detail;
            const map = detail.map

            map.removeControl(map.zoomControl);
            const customPositionMarkerIcon = L.icon({
                iconUrl: '../../../../static/position.svg',
                iconAnchor: [29.5, 29.5]
            })
            navigator.geolocation.getCurrentPosition(function(position) {
                map.setView([position.coords.latitude, position.coords.longitude]);
                L.marker([position.coords.latitude, position.coords.longitude],{icon: customPositionMarkerIcon}).addTo(map);
            });

            const customIcon = L.icon({
                iconUrl: '../../../../static/parkIcon.png',
                iconSize: [30, 50]
            });

            {% for p in lista_parcheggi %}
                L.marker([ {{ p.lat }}, {{ p.long }}], {icon: customIcon}).addTo(map);
            {% endfor %}


        }, false);
    </script>




</head>
<body class="fullscreen">
<div class="leaflet-container fullscreen">

    <div class="toolbar">
        <input type="text" placeholder="Cerca la tua Destinazione" class="toolbar-input">
    </div>

    <div class="credit-card-button-container">
        <button class="btn"></button>
    </div>

    {% leaflet_map "main"%}
</div>

</body>
</html>










